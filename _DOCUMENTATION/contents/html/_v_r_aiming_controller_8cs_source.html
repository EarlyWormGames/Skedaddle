<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Skedaddle: Assets/Plugins/RootMotion/FinalIK/_DEMOS/Virtual Reality/Scripts/VRAimingController.cs Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="lorisicon.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Skedaddle
   &#160;<span id="projectnumber">1.0.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('_v_r_aiming_controller_8cs_source.html','');});
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">VRAimingController.cs</div>  </div>
</div><!--header-->
<div class="contents">
<a href="_v_r_aiming_controller_8cs.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="keyword">using</span> <a class="code" href="namespace_unity_engine.html">UnityEngine</a>;</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="keyword">using</span> <a class="code" href="namespace_system.html">System</a>.Collections;</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="keyword">using</span> <a class="code" href="namespace_root_motion.html">RootMotion</a>.<a class="code" href="namespace_root_motion_1_1_final_i_k.html">FinalIK</a>;</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="keyword">using</span> <a class="code" href="namespace_unity_engine.html">UnityEngine</a>.XR;</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;</div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="keyword">namespace </span><a class="code" href="namespace_root_motion.html">RootMotion</a>.Demos {</div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;</div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;    [RequireComponent(typeof(<a class="code" href="class_root_motion_1_1_final_i_k_1_1_full_body_biped_i_k.html">FullBodyBipedIK</a>))]</div><div class="line"><a name="l00012"></a><span class="lineno"><a class="line" href="class_root_motion_1_1_demos_1_1_v_r_aiming_controller.html">   12</a></span>&#160;    <span class="keyword">public</span> <span class="keyword">class </span><a class="code" href="class_root_motion_1_1_demos_1_1_v_r_aiming_controller.html">VRAimingController</a> : MonoBehaviour {</div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;    </div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;        [<a class="code" href="namespace_system.html">System</a>.Serializable]</div><div class="line"><a name="l00015"></a><span class="lineno"><a class="line" href="struct_root_motion_1_1_demos_1_1_v_r_aiming_controller_1_1_targets.html">   15</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">struct </span><a class="code" href="struct_root_motion_1_1_demos_1_1_v_r_aiming_controller_1_1_targets.html">Targets</a> {</div><div class="line"><a name="l00016"></a><span class="lineno"><a class="line" href="struct_root_motion_1_1_demos_1_1_v_r_aiming_controller_1_1_targets.html#a49ee9c533d1c84c8016a165c5ce8b1d0">   16</a></span>&#160;            <span class="keyword">public</span> Transform leftHand, <a class="code" href="struct_root_motion_1_1_demos_1_1_v_r_aiming_controller_1_1_targets.html#a49ee9c533d1c84c8016a165c5ce8b1d0">rightHand</a>, bendGoalLeftArm, bendGoalRightArm;</div><div class="line"><a name="l00017"></a><span class="lineno"><a class="line" href="struct_root_motion_1_1_demos_1_1_v_r_aiming_controller_1_1_targets.html#ab0ef2ae0ee9f0dfabfd405596344dbaf">   17</a></span>&#160;            <span class="keyword">public</span> <a class="code" href="class_root_motion_1_1_demos_1_1_v_r_aiming_controller_1_1_bone_rotation_offset.html">BoneRotationOffset</a>[] <a class="code" href="struct_root_motion_1_1_demos_1_1_v_r_aiming_controller_1_1_targets.html#ab0ef2ae0ee9f0dfabfd405596344dbaf">boneRotationOffsets</a>;</div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;        }</div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;        </div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;        [<a class="code" href="namespace_system.html">System</a>.Serializable]</div><div class="line"><a name="l00021"></a><span class="lineno"><a class="line" href="class_root_motion_1_1_demos_1_1_v_r_aiming_controller.html#ab88bf3b4946db8022f1a2049e3fc9399">   21</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">enum</span> <a class="code" href="class_root_motion_1_1_demos_1_1_v_r_aiming_controller.html#ab88bf3b4946db8022f1a2049e3fc9399">Handedness</a> {</div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;            Right,</div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;            Left</div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;        }</div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;        </div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;        [<a class="code" href="namespace_system.html">System</a>.Serializable]</div><div class="line"><a name="l00027"></a><span class="lineno"><a class="line" href="class_root_motion_1_1_demos_1_1_v_r_aiming_controller_1_1_bone_rotation_offset.html">   27</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">class </span><a class="code" href="class_root_motion_1_1_demos_1_1_v_r_aiming_controller_1_1_bone_rotation_offset.html">BoneRotationOffset</a> {</div><div class="line"><a name="l00028"></a><span class="lineno"><a class="line" href="class_root_motion_1_1_demos_1_1_v_r_aiming_controller_1_1_bone_rotation_offset.html#a671520b717523c724fc6a6c29484d221">   28</a></span>&#160;            <span class="keyword">public</span> Transform <a class="code" href="class_root_motion_1_1_demos_1_1_v_r_aiming_controller_1_1_bone_rotation_offset.html#a671520b717523c724fc6a6c29484d221">transform</a>;</div><div class="line"><a name="l00029"></a><span class="lineno"><a class="line" href="class_root_motion_1_1_demos_1_1_v_r_aiming_controller_1_1_bone_rotation_offset.html#aa0aa1e2e2ab44a35f765ed8f552f4154">   29</a></span>&#160;            <span class="keyword">public</span> Vector3 <a class="code" href="class_root_motion_1_1_demos_1_1_v_r_aiming_controller_1_1_bone_rotation_offset.html#aa0aa1e2e2ab44a35f765ed8f552f4154">value</a>;</div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;        }</div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;    </div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;        [Header(<span class="stringliteral">&quot;Component References&quot;</span>)]</div><div class="line"><a name="l00033"></a><span class="lineno"><a class="line" href="class_root_motion_1_1_demos_1_1_v_r_aiming_controller.html#a4adf92a8752d112a38b0f7227f41359f">   33</a></span>&#160;        <span class="keyword">public</span> <a class="code" href="class_root_motion_1_1_demos_1_1_v_r_animator_controller.html">VRAnimatorController</a> <a class="code" href="class_root_motion_1_1_demos_1_1_v_r_aiming_controller.html#a4adf92a8752d112a38b0f7227f41359f">animatorController</a>;</div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;        [Tooltip(<span class="stringliteral">&quot;Which weapon is the character holding at this time?&quot;</span>)]</div><div class="line"><a name="l00035"></a><span class="lineno"><a class="line" href="class_root_motion_1_1_demos_1_1_v_r_aiming_controller.html#aeac2a0bfa5586abce0d19104b82b967b">   35</a></span>&#160;        <span class="keyword">public</span> <a class="code" href="class_root_motion_1_1_demos_1_1_weapon_base.html">WeaponBase</a> <a class="code" href="class_root_motion_1_1_demos_1_1_v_r_aiming_controller.html#aeac2a0bfa5586abce0d19104b82b967b">currentWeapon</a>;</div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;        </div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;        <span class="keyword">private</span> Transform cam { <span class="keyword">get</span> { <span class="keywordflow">return</span> animatorController.<a class="code" href="class_root_motion_1_1_demos_1_1_v_r_animator_controller.html#ae531f867289a1ea40a798b84d6f69cb2">cam</a>; }}</div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;        <span class="keyword">private</span> Transform characterController { <span class="keyword">get</span> { <span class="keywordflow">return</span> animatorController.<a class="code" href="class_root_motion_1_1_demos_1_1_v_r_animator_controller.html#af33a445600f484796940fee0442619b5">characterController</a>; }}</div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;        </div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;        [Header(<span class="stringliteral">&quot;Weights&quot;</span>)]</div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;        [Tooltip(<span class="stringliteral">&quot;The master weight of aiming.&quot;</span>)]</div><div class="line"><a name="l00042"></a><span class="lineno"><a class="line" href="class_root_motion_1_1_demos_1_1_v_r_aiming_controller.html#a3165b535b76344b266cea3ec047fd6e5">   42</a></span>&#160;        [Range(0f, 1f)] <span class="keyword">public</span> <span class="keywordtype">float</span> weight = 1f;</div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;        [Tooltip(<span class="stringliteral">&quot;The weight of twisting the spine to better hold the weapons&quot;</span>)]</div><div class="line"><a name="l00044"></a><span class="lineno"><a class="line" href="class_root_motion_1_1_demos_1_1_v_r_aiming_controller.html#a39e139308adb4666fd7fdc490189a3ed">   44</a></span>&#160;        [Range(0f, 1f)] <span class="keyword">public</span> <span class="keywordtype">float</span> spineTwistWeight = 1f;</div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;        </div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;        [Header(<span class="stringliteral">&quot;Hands&quot;</span>)]</div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;        [Tooltip(<span class="stringliteral">&quot;Which hand holds the weapon?&quot;</span>)]</div><div class="line"><a name="l00048"></a><span class="lineno"><a class="line" href="class_root_motion_1_1_demos_1_1_v_r_aiming_controller.html#aaf70e369f4b6afc75b0d2fd39b7cd151">   48</a></span>&#160;        <span class="keyword">public</span> <a class="code" href="class_root_motion_1_1_demos_1_1_v_r_aiming_controller.html#ab88bf3b4946db8022f1a2049e3fc9399">Handedness</a> <a class="code" href="class_root_motion_1_1_demos_1_1_v_r_aiming_controller.html#aaf70e369f4b6afc75b0d2fd39b7cd151">handedness</a>;</div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;        [Tooltip(<span class="stringliteral">&quot;How far left/right to offset the weapons?&quot;</span>)]</div><div class="line"><a name="l00050"></a><span class="lineno"><a class="line" href="class_root_motion_1_1_demos_1_1_v_r_aiming_controller.html#a573a4f23d1b58d71cf5aae53c1188b37">   50</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">float</span> sideOffset = 0.1f;</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;        [Tooltip(<span class="stringliteral">&quot;Various references and settings for left handed weapons.&quot;</span>)]</div><div class="line"><a name="l00052"></a><span class="lineno"><a class="line" href="class_root_motion_1_1_demos_1_1_v_r_aiming_controller.html#ae4024252e08d42e68c70c95eabc83f1a">   52</a></span>&#160;        <span class="keyword">public</span> <a class="code" href="struct_root_motion_1_1_demos_1_1_v_r_aiming_controller_1_1_targets.html">Targets</a> <a class="code" href="class_root_motion_1_1_demos_1_1_v_r_aiming_controller.html#ae4024252e08d42e68c70c95eabc83f1a">leftHandedTargets</a>;</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;        [Tooltip(<span class="stringliteral">&quot;Various references and settings for right handed weapons.&quot;</span>)]</div><div class="line"><a name="l00054"></a><span class="lineno"><a class="line" href="class_root_motion_1_1_demos_1_1_v_r_aiming_controller.html#a24663be32b395b62fbdb07192c977478">   54</a></span>&#160;        <span class="keyword">public</span> <a class="code" href="struct_root_motion_1_1_demos_1_1_v_r_aiming_controller_1_1_targets.html">Targets</a> <a class="code" href="class_root_motion_1_1_demos_1_1_v_r_aiming_controller.html#a24663be32b395b62fbdb07192c977478">rightHandedTargets</a>;</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;        </div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;        [Header(<span class="stringliteral">&quot;Weapon Positioning&quot;</span>)]</div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;        [Tooltip(<span class="stringliteral">&quot;The Transform that rotates the weapon.&quot;</span>)]</div><div class="line"><a name="l00058"></a><span class="lineno"><a class="line" href="class_root_motion_1_1_demos_1_1_v_r_aiming_controller.html#afa0172fdd1f8cf9ebee12261c514f0b8">   58</a></span>&#160;        <span class="keyword">public</span> Transform <a class="code" href="class_root_motion_1_1_demos_1_1_v_r_aiming_controller.html#afa0172fdd1f8cf9ebee12261c514f0b8">weaponsPivot</a>;</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;        [Tooltip(<span class="stringliteral">&quot;Child of weaponsPivot, parent of all weapons.&quot;</span>)]</div><div class="line"><a name="l00060"></a><span class="lineno"><a class="line" href="class_root_motion_1_1_demos_1_1_v_r_aiming_controller.html#a98b44bcc95c0f555e09fc2ecd124bef7">   60</a></span>&#160;        <span class="keyword">public</span> Transform <a class="code" href="class_root_motion_1_1_demos_1_1_v_r_aiming_controller.html#a98b44bcc95c0f555e09fc2ecd124bef7">weaponsAnchor</a>;</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;        [Tooltip(<span class="stringliteral">&quot;Weapons will inherit motion from that Transform.&quot;</span>)]</div><div class="line"><a name="l00062"></a><span class="lineno"><a class="line" href="class_root_motion_1_1_demos_1_1_v_r_aiming_controller.html#a3a845b81233fc8f78c93bcc93cb0cfa5">   62</a></span>&#160;        <span class="keyword">public</span> Transform <a class="code" href="class_root_motion_1_1_demos_1_1_v_r_aiming_controller.html#a3a845b81233fc8f78c93bcc93cb0cfa5">pivotMotionTarget</a>;</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;        [Tooltip(<span class="stringliteral">&quot;Speed of various position/rotation interpolations.&quot;</span>)]</div><div class="line"><a name="l00064"></a><span class="lineno"><a class="line" href="class_root_motion_1_1_demos_1_1_v_r_aiming_controller.html#ac4aa733d606e1865b387ed2a5c349460">   64</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">float</span> lerpSpeed = 8f;</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;        [Tooltip(<span class="stringliteral">&quot;The smoothing speed of inheriting motion from the pivotMotionTarget.&quot;</span>)]</div><div class="line"><a name="l00066"></a><span class="lineno"><a class="line" href="class_root_motion_1_1_demos_1_1_v_r_aiming_controller.html#a30de092c32466a249e2e2359221e965f">   66</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">float</span> pivotMotionSmoothSpeed = 5f;</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;        [Tooltip(<span class="stringliteral">&quot;The weight of inheriting motion from the pivotMotionTarget,&quot;</span>)]</div><div class="line"><a name="l00068"></a><span class="lineno"><a class="line" href="class_root_motion_1_1_demos_1_1_v_r_aiming_controller.html#a9771dbdf7c4900af38a7c8595643e7b5">   68</a></span>&#160;        [Range(0f, 1f)] <span class="keyword">public</span> <span class="keywordtype">float</span> pivotMotionWeight = 0.5f;</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;        [Tooltip(<span class="stringliteral">&quot;The limit of up/down rotation for the weapons.&quot;</span>)]</div><div class="line"><a name="l00070"></a><span class="lineno"><a class="line" href="class_root_motion_1_1_demos_1_1_v_r_aiming_controller.html#a55e745e29b9c43b7a5622bac7288a378">   70</a></span>&#160;        [Range(0f, 90f)] <span class="keyword">public</span> <span class="keywordtype">float</span> aimVerticalLimit = 80f;</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;        [Tooltip(<span class="stringliteral">&quot;Local Z position of the weapons anchor when the weapon is locked to the camera (while holding RMB).&quot;</span>)]</div><div class="line"><a name="l00072"></a><span class="lineno"><a class="line" href="class_root_motion_1_1_demos_1_1_v_r_aiming_controller.html#a01bdac614d05950b279caa9ee955dbf8">   72</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">float</span> aimZ = 0.05f;</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;        </div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;        <span class="keyword">private</span> <a class="code" href="class_root_motion_1_1_final_i_k_1_1_full_body_biped_i_k.html">FullBodyBipedIK</a> ik;</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;        <span class="keyword">private</span> <span class="keywordtype">float</span> lastWeight;</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;        <span class="keyword">private</span> <a class="code" href="class_root_motion_1_1_final_i_k_1_1_poser.html">Poser</a> poserLeftHand, poserRightHand;</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;        <span class="keyword">private</span> Vector3 pivotRelativePosition;</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;        <span class="keyword">private</span> Vector3 weaponsPivotLocalPosition;</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;        <span class="keyword">private</span> Vector3 defaultWeaponsAnchorLocalPosition;</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;        <span class="keyword">private</span> Vector3 aimVel;</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;        <span class="keyword">private</span> Vector3 aimRandom;</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;        <span class="keyword">private</span> <span class="keywordtype">float</span> x, y;</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;        <span class="keyword">private</span> <span class="keywordtype">float</span> aimWeight;</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;        <span class="keyword">private</span> Vector3 cameraPosition;</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;        <span class="keyword">private</span> Vector3 lastCharacterPosition;</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;        </div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;        <span class="keywordtype">void</span> Start() {</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;            <span class="comment">// Find some components.</span></div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;            ik = GetComponent&lt;FullBodyBipedIK&gt;();</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;            poserLeftHand = ik.<a class="code" href="class_root_motion_1_1_final_i_k_1_1_full_body_biped_i_k.html#a0dfac5c2550dad76128806dd5fdc019b">references</a>.<a class="code" href="class_root_motion_1_1_biped_references.html#a0d28263f5680784a76ea79c2f9c9a251">leftHand</a>.GetComponent&lt;<a class="code" href="class_root_motion_1_1_final_i_k_1_1_poser.html">Poser</a>&gt;();</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;            poserRightHand = ik.<a class="code" href="class_root_motion_1_1_final_i_k_1_1_full_body_biped_i_k.html#a0dfac5c2550dad76128806dd5fdc019b">references</a>.<a class="code" href="class_root_motion_1_1_biped_references.html#ad6fa2cc62f62b81150f4d5ef0217be72">rightHand</a>.GetComponent&lt;<a class="code" href="class_root_motion_1_1_final_i_k_1_1_poser.html">Poser</a>&gt;();</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;            </div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;            ik.<a class="code" href="class_root_motion_1_1_final_i_k_1_1_full_body_biped_i_k.html#ae1ba56ebef8d8312da5a610a90472823">solver</a>.<a class="code" href="class_root_motion_1_1_final_i_k_1_1_i_k_solver.html#a848d38a01f7498761a3f9964a66f0555">OnPostUpdate</a> += AfterFBBIK;</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;            lastWeight = weight;</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;            </div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;            SetHandedness(handedness);</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;            </div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;            <span class="comment">// Remember some default positions</span></div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;            defaultWeaponsAnchorLocalPosition = weaponsAnchor.localPosition;</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;            weaponsPivotLocalPosition = weaponsPivot.localPosition;</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;            pivotRelativePosition = pivotMotionTarget.InverseTransformPoint(weaponsPivot.position);</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;            </div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;            cameraPosition = TargetsCameraPosition();</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;            lastCharacterPosition = characterController.position;</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;        }</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;        </div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;        <span class="keywordtype">void</span> LateUpdate() {</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;            <span class="comment">// Smooth camera position</span></div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;            cameraPosition += characterController.position - lastCharacterPosition;</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;            lastCharacterPosition = characterController.position;</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;            cameraPosition = Vector3.Lerp(cameraPosition, TargetsCameraPosition(), Time.deltaTime * lerpSpeed);</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;            </div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;            <span class="keywordflow">if</span> (weight &lt;= 0f &amp;&amp; lastWeight &lt;= 0f) <span class="keywordflow">return</span>;   </div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;            lastWeight = weight;</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;            </div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;            <span class="comment">// Pivot motion</span></div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;            <span class="keywordtype">float</span> pW = animatorController.<a class="code" href="class_root_motion_1_1_demos_1_1_v_r_animator_controller.html#af2d8067d0e9946fd2f0f305f90b3e11f">velocity</a>.magnitude * pivotMotionWeight;</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;            weaponsPivot.position = Vector3.Lerp(weaponsPivot.position, Vector3.Lerp(weaponsPivot.parent.TransformPoint(weaponsPivotLocalPosition), pivotMotionTarget.TransformPoint(pivotRelativePosition), pW), Time.deltaTime * pivotMotionSmoothSpeed);</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;            </div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;            <span class="comment">// Switch handedness</span></div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;            <span class="keywordflow">if</span> (Input.GetKeyDown(KeyCode.H)) {</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;                SetHandedness(handedness == Handedness.Right? Handedness.Left: Handedness.Right);</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;            }</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;            </div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;            <span class="comment">// Keep lerping weapons anchor to its default local position</span></div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;            <span class="comment">// That means we can change it&#39;s position if necessary, but be sure that it always smoothly returns as if it was connected to the weaponsPivot with a soft spring   </span></div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;            defaultWeaponsAnchorLocalPosition.x = handedness == Handedness.Right? sideOffset: -sideOffset;</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;            weaponsAnchor.localPosition = Vector3.Lerp(weaponsAnchor.localPosition, defaultWeaponsAnchorLocalPosition, Time.deltaTime * lerpSpeed); </div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;            </div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;            <span class="comment">// Recoil</span></div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;            <span class="keywordflow">if</span> (currentWeapon != null) {</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;                <span class="keywordflow">if</span> (Input.GetMouseButtonDown(0)) {</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;                    <span class="comment">// Fire the weapon</span></div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;                    currentWeapon.<a class="code" href="class_root_motion_1_1_demos_1_1_weapon_base.html#ae0c2eda9d6c7f249bc08d670fb9dd7ff">Fire</a>();</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;                </div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;                    <span class="comment">// Kick back</span></div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;                    weaponsAnchor.localPosition += currentWeapon.<a class="code" href="class_root_motion_1_1_demos_1_1_weapon_base.html#a26aa17053a7f5a8373b6ac4c0592bdfe">recoilDirection</a> + <a class="code" href="namespace_unity_engine.html">UnityEngine</a>.Random.insideUnitSphere * currentWeapon.<a class="code" href="class_root_motion_1_1_demos_1_1_weapon_base.html#a26aa17053a7f5a8373b6ac4c0592bdfe">recoilDirection</a>.magnitude * <a class="code" href="namespace_unity_engine.html">UnityEngine</a>.Random.value * currentWeapon.<a class="code" href="class_root_motion_1_1_demos_1_1_weapon_base.html#a9eddded7a094a8fbf9acdd342ea72053">recoilRandom</a>;</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;                    </div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;                    <span class="comment">// Rotate up</span></div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;                    aimVel.x -= currentWeapon.<a class="code" href="class_root_motion_1_1_demos_1_1_weapon_base.html#a1c14d851b1c4d00056867e21fcbcd3c7">recoilAngleVertical</a> + currentWeapon.<a class="code" href="class_root_motion_1_1_demos_1_1_weapon_base.html#a1c14d851b1c4d00056867e21fcbcd3c7">recoilAngleVertical</a> * <a class="code" href="namespace_unity_engine.html">UnityEngine</a>.Random.value * currentWeapon.<a class="code" href="class_root_motion_1_1_demos_1_1_weapon_base.html#a9eddded7a094a8fbf9acdd342ea72053">recoilRandom</a>;</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;                    </div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;                    <span class="comment">// Rotate horizontally</span></div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;                    <span class="keywordtype">float</span> hor = currentWeapon.<a class="code" href="class_root_motion_1_1_demos_1_1_weapon_base.html#ab1ec81cb984557cbc299684a71d72fd9">recoilAngleHorizontal</a> * <a class="code" href="namespace_unity_engine.html">UnityEngine</a>.Random.value;</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;                    <span class="keywordflow">if</span> (<a class="code" href="namespace_unity_engine.html">UnityEngine</a>.Random.value &gt; 0.5f) hor = -hor;</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;                    aimVel.y += hor + hor * <a class="code" href="namespace_unity_engine.html">UnityEngine</a>.Random.value * currentWeapon.<a class="code" href="class_root_motion_1_1_demos_1_1_weapon_base.html#a9eddded7a094a8fbf9acdd342ea72053">recoilRandom</a>;</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;                }</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;            }</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;            </div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;            <span class="comment">// Rotate bones</span></div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;            <span class="keywordflow">foreach</span> (BoneRotationOffset rotationOffset <span class="keywordflow">in</span> targets.boneRotationOffsets) {</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;                rotationOffset.transform.localRotation = Quaternion.Euler(rotationOffset.value * weight) * rotationOffset.transform.localRotation;</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;            }</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;            </div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;            <span class="comment">// Locking weapon to camera</span></div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;            <span class="keywordtype">bool</span> aim = Input.GetMouseButton(1);</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;            </div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;            <span class="comment">// Weight of locking the weapon to the camera</span></div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;            <span class="keywordtype">float</span> aimWeightTarget = aim? 1f: 0f;</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;            aimWeight = Mathf.MoveTowards(aimWeight, aimWeightTarget, Time.deltaTime * 3f);</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;            </div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;            <span class="comment">// Rotate the weapon with the mouse (around the weaponsPivot)</span></div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;            RotateWeapon(Input.GetAxis(<span class="stringliteral">&quot;Mouse X&quot;</span>) * (1f - aimWeight), Input.GetAxis(<span class="stringliteral">&quot;Mouse Y&quot;</span>) * (1f - aimWeight));</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;            </div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;            <span class="comment">// Locking weapon to camera</span></div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;            <span class="keywordflow">if</span> (aim) {</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;                weaponsPivot.position = Vector3.Lerp(weaponsPivot.position, cameraPosition, aimWeight);</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;                weaponsAnchor.localPosition = Vector3.Lerp(weaponsAnchor.localPosition, <span class="keyword">new</span> Vector3(0f, weaponsAnchor.localPosition.y, aimZ), aimWeight);</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;            </div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;                weaponsPivot.rotation = Quaternion.Lerp(weaponsPivot.rotation, Quaternion.LookRotation(cam.forward), Time.deltaTime * lerpSpeed);</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;            }</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;        </div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;            <span class="comment">// Push the weapons anchor forward if it&#39;s too close to the camera</span></div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;            Vector3 offset = Vector3.Project(weaponsAnchor.position - TargetsCameraPosition(), cam.forward);</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;            <span class="keywordflow">if</span> (Vector3.Dot(offset, cam.forward) &lt; 0f) weaponsAnchor.position -= offset;</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;            </div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;            <span class="comment">// Effector positions</span></div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;            ik.<a class="code" href="class_root_motion_1_1_final_i_k_1_1_full_body_biped_i_k.html#ae1ba56ebef8d8312da5a610a90472823">solver</a>.<a class="code" href="class_root_motion_1_1_final_i_k_1_1_i_k_solver_full_body_biped.html#a2bce9e947f2ba3547b087d561ef1b8ec">leftHandEffector</a>.<a class="code" href="class_root_motion_1_1_final_i_k_1_1_i_k_effector.html#a3ed027b3d54e6afa83aa3f293e84f629">position</a> = targets.leftHand.position;</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;            ik.<a class="code" href="class_root_motion_1_1_final_i_k_1_1_full_body_biped_i_k.html#ae1ba56ebef8d8312da5a610a90472823">solver</a>.<a class="code" href="class_root_motion_1_1_final_i_k_1_1_i_k_solver_full_body_biped.html#a1faedd9aebeaaa3e042bdd74c434fb9d">rightHandEffector</a>.<a class="code" href="class_root_motion_1_1_final_i_k_1_1_i_k_effector.html#a3ed027b3d54e6afa83aa3f293e84f629">position</a> = targets.rightHand.position;</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;            </div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;            ik.<a class="code" href="class_root_motion_1_1_final_i_k_1_1_full_body_biped_i_k.html#ae1ba56ebef8d8312da5a610a90472823">solver</a>.<a class="code" href="class_root_motion_1_1_final_i_k_1_1_i_k_solver_full_body_biped.html#a2bce9e947f2ba3547b087d561ef1b8ec">leftHandEffector</a>.<a class="code" href="class_root_motion_1_1_final_i_k_1_1_i_k_effector.html#a0e404e3d964a2d69ff07c6d0f19fa983">positionWeight</a> = weight;</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;            ik.<a class="code" href="class_root_motion_1_1_final_i_k_1_1_full_body_biped_i_k.html#ae1ba56ebef8d8312da5a610a90472823">solver</a>.<a class="code" href="class_root_motion_1_1_final_i_k_1_1_i_k_solver_full_body_biped.html#a1faedd9aebeaaa3e042bdd74c434fb9d">rightHandEffector</a>.<a class="code" href="class_root_motion_1_1_final_i_k_1_1_i_k_effector.html#a0e404e3d964a2d69ff07c6d0f19fa983">positionWeight</a> = weight;</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;            </div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;            <span class="comment">// Bend goals</span></div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;            ik.<a class="code" href="class_root_motion_1_1_final_i_k_1_1_full_body_biped_i_k.html#ae1ba56ebef8d8312da5a610a90472823">solver</a>.<a class="code" href="class_root_motion_1_1_final_i_k_1_1_i_k_solver_full_body_biped.html#af2d0f9dc36bf32dcca65f9ffbefb3e41">leftArmChain</a>.<a class="code" href="class_root_motion_1_1_final_i_k_1_1_f_b_i_k_chain.html#a9da22043dfd81c60bb9d3e8b7a7d6e8a">bendConstraint</a>.<a class="code" href="class_root_motion_1_1_final_i_k_1_1_i_k_constraint_bend.html#acddd608db296ef32d7e3396918d0cfad">bendGoal</a> = targets.bendGoalLeftArm;</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;            ik.<a class="code" href="class_root_motion_1_1_final_i_k_1_1_full_body_biped_i_k.html#ae1ba56ebef8d8312da5a610a90472823">solver</a>.<a class="code" href="class_root_motion_1_1_final_i_k_1_1_i_k_solver_full_body_biped.html#ae95e0496cfb2192e080c48069dc699ee">rightArmChain</a>.<a class="code" href="class_root_motion_1_1_final_i_k_1_1_f_b_i_k_chain.html#a9da22043dfd81c60bb9d3e8b7a7d6e8a">bendConstraint</a>.<a class="code" href="class_root_motion_1_1_final_i_k_1_1_i_k_constraint_bend.html#acddd608db296ef32d7e3396918d0cfad">bendGoal</a> = targets.bendGoalRightArm;</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;            </div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;            ik.<a class="code" href="class_root_motion_1_1_final_i_k_1_1_full_body_biped_i_k.html#ae1ba56ebef8d8312da5a610a90472823">solver</a>.<a class="code" href="class_root_motion_1_1_final_i_k_1_1_i_k_solver_full_body_biped.html#af2d0f9dc36bf32dcca65f9ffbefb3e41">leftArmChain</a>.<a class="code" href="class_root_motion_1_1_final_i_k_1_1_f_b_i_k_chain.html#a9da22043dfd81c60bb9d3e8b7a7d6e8a">bendConstraint</a>.<a class="code" href="class_root_motion_1_1_final_i_k_1_1_i_k_constraint_bend.html#ab50c664029898e7fefaab81134793ed0">weight</a> = weight;</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;            ik.<a class="code" href="class_root_motion_1_1_final_i_k_1_1_full_body_biped_i_k.html#ae1ba56ebef8d8312da5a610a90472823">solver</a>.<a class="code" href="class_root_motion_1_1_final_i_k_1_1_i_k_solver_full_body_biped.html#ae95e0496cfb2192e080c48069dc699ee">rightArmChain</a>.<a class="code" href="class_root_motion_1_1_final_i_k_1_1_f_b_i_k_chain.html#a9da22043dfd81c60bb9d3e8b7a7d6e8a">bendConstraint</a>.<a class="code" href="class_root_motion_1_1_final_i_k_1_1_i_k_constraint_bend.html#ab50c664029898e7fefaab81134793ed0">weight</a> = weight;</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;            </div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;            <span class="comment">// Hand Poser</span></div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;            poserLeftHand.<a class="code" href="class_root_motion_1_1_final_i_k_1_1_poser.html#a386d7427ccd5ed4e36f586b48435b94b">weight</a> = weight;</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;            poserRightHand.<a class="code" href="class_root_motion_1_1_final_i_k_1_1_poser.html#a386d7427ccd5ed4e36f586b48435b94b">weight</a> = weight;</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;            </div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;            <span class="comment">// Rotate the character along when the gun is turned too far left or right</span></div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;            animatorController.<a class="code" href="class_root_motion_1_1_demos_1_1_v_r_animator_controller.html#a62e3a4eb28348a470e9327343f29d7ef">RotateCharacter</a>(weaponsAnchor.forward, animatorController.<a class="code" href="class_root_motion_1_1_demos_1_1_v_r_animator_controller.html#a897d2132fddcaf0d6325bd1aca47b24b">maxViewAngle</a>, weaponsPivot);</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;            </div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;            <span class="comment">// Twist the spine a bit to better hold the weapon</span></div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;            TwistSpine();</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;        }</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;        </div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;        <span class="comment">// Rotate the weapon with the mouse (around the weaponsPivot)</span></div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;        <span class="keyword">private</span> <span class="keywordtype">void</span> RotateWeapon(<span class="keywordtype">float</span> horAdd, <span class="keywordtype">float</span> vertAdd) {</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;            Vector3 input = <span class="keyword">new</span> Vector3(-vertAdd, horAdd, 0f);</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;            </div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;            <span class="comment">// Random sway on the gun</span></div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;            aimRandom = Vector3.Lerp(aimRandom, <a class="code" href="namespace_unity_engine.html">UnityEngine</a>.Random.onUnitSphere, Time.deltaTime);</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;            input += aimRandom * 0.25f;</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;            </div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;            aimVel = Vector3.Lerp(aimVel, input, Time.deltaTime * 20f);</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;            </div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;            Vector3 forwardFlat = weaponsPivot.forward;</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;            forwardFlat.y = 0f;</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;            </div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;            <span class="comment">// Compose the rotation from yaw and pitch so they could be limited individually</span></div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;            Quaternion v = Quaternion.AngleAxis(aimVel.x, Quaternion.LookRotation(forwardFlat) * Vector3.right);</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;            Quaternion h = Quaternion.AngleAxis(aimVel.y, Vector3.up);</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;            </div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;            <span class="comment">// Limiting yaw</span></div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;            Vector3 forward = Vector3.RotateTowards(forwardFlat, v * weaponsPivot.forward, aimVerticalLimit * Mathf.Deg2Rad, 1f);</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;            </div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;            weaponsPivot.rotation = Quaternion.LookRotation(h * forward, Vector3.up);</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;        }</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;        </div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;        <span class="comment">// Use left- or right-handed targets?</span></div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;        <span class="keyword">private</span> Targets targets {</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;            <span class="keyword">get</span> {</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;                <span class="keywordflow">if</span> (handedness == Handedness.Right) <span class="keywordflow">return</span> rightHandedTargets;</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;                <span class="keywordflow">return</span> leftHandedTargets;</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;            }</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;        }</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;        </div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;        <span class="comment">// Returns the offset position of the camera</span></div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;        <span class="keyword">private</span> Vector3 TargetsCameraPosition() {</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;            <span class="keywordtype">float</span> eyeDistance = (InputTracking.GetLocalPosition(XRNode.LeftEye) - InputTracking.GetLocalPosition(XRNode.RightEye)).magnitude * 0.5f;</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;            Vector3 offset = Vector3.right * eyeDistance;</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;            <span class="keywordflow">if</span> (handedness == Handedness.Left) offset = -offset;</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;            </div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;            <span class="keywordflow">return</span> cam.position + cam.rotation * offset;</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;        }</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;        </div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;        <span class="comment">// Change from left- to right-handedness and back</span></div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;        <span class="keyword">private</span> <span class="keywordtype">void</span> SetHandedness(Handedness h) {</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;            handedness = h;</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;            </div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;            poserLeftHand.<a class="code" href="class_root_motion_1_1_final_i_k_1_1_poser.html#adab1ab1d067ac6ddf6df04ffbb9c96bb">poseRoot</a> = targets.leftHand;</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;            poserRightHand.<a class="code" href="class_root_motion_1_1_final_i_k_1_1_poser.html#adab1ab1d067ac6ddf6df04ffbb9c96bb">poseRoot</a> = targets.rightHand;</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;            </div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;            poserLeftHand.<a class="code" href="class_root_motion_1_1_final_i_k_1_1_poser.html#af8bf01f5bada3be99c43121b61022238">AutoMapping</a>();</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;            poserRightHand.<a class="code" href="class_root_motion_1_1_final_i_k_1_1_poser.html#af8bf01f5bada3be99c43121b61022238">AutoMapping</a>();</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;        }</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;        </div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;        <span class="comment">// Twist the spine a bit to better hold the weapon</span></div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;        <span class="keyword">private</span> <span class="keywordtype">void</span> TwistSpine() {</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;            <span class="keywordflow">if</span> (spineTwistWeight &lt;= 0f) <span class="keywordflow">return</span>;</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;            </div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;            Vector3 weaponsForward = weaponsAnchor.forward;</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;            weaponsForward.y = 0f;</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;            </div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;            Quaternion spineRotation = Quaternion.FromToRotation(transform.forward, weaponsForward);</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;            </div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;            <span class="keywordflow">foreach</span> (BoneRotationOffset rotationOffset <span class="keywordflow">in</span> targets.boneRotationOffsets) {</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;                rotationOffset.transform.rotation = Quaternion.Lerp(Quaternion.identity, spineRotation, (1f / (<span class="keywordtype">float</span>)targets.boneRotationOffsets.Length) * spineTwistWeight) * rotationOffset.transform.rotation;</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;            }</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;        }</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;        </div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;        <span class="comment">// Rotate hand bones</span></div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;        <span class="keywordtype">void</span> AfterFBBIK() {</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;            <span class="keywordflow">if</span> (weight &lt;= 0f) <span class="keywordflow">return</span>;</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;            </div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;            ik.<a class="code" href="class_root_motion_1_1_final_i_k_1_1_full_body_biped_i_k.html#a0dfac5c2550dad76128806dd5fdc019b">references</a>.<a class="code" href="class_root_motion_1_1_biped_references.html#a0d28263f5680784a76ea79c2f9c9a251">leftHand</a>.rotation = Quaternion.Lerp(ik.<a class="code" href="class_root_motion_1_1_final_i_k_1_1_full_body_biped_i_k.html#a0dfac5c2550dad76128806dd5fdc019b">references</a>.<a class="code" href="class_root_motion_1_1_biped_references.html#a0d28263f5680784a76ea79c2f9c9a251">leftHand</a>.rotation, targets.leftHand.rotation, weight);</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;            ik.<a class="code" href="class_root_motion_1_1_final_i_k_1_1_full_body_biped_i_k.html#a0dfac5c2550dad76128806dd5fdc019b">references</a>.<a class="code" href="class_root_motion_1_1_biped_references.html#ad6fa2cc62f62b81150f4d5ef0217be72">rightHand</a>.rotation = Quaternion.Lerp(ik.<a class="code" href="class_root_motion_1_1_final_i_k_1_1_full_body_biped_i_k.html#a0dfac5c2550dad76128806dd5fdc019b">references</a>.<a class="code" href="class_root_motion_1_1_biped_references.html#ad6fa2cc62f62b81150f4d5ef0217be72">rightHand</a>.rotation, targets.rightHand.rotation, weight);</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;        }</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;        </div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;        <span class="keywordtype">void</span> OnDestroy() {</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;            <span class="keywordflow">if</span> (ik != null) ik.<a class="code" href="class_root_motion_1_1_final_i_k_1_1_full_body_biped_i_k.html#ae1ba56ebef8d8312da5a610a90472823">solver</a>.<a class="code" href="class_root_motion_1_1_final_i_k_1_1_i_k_solver.html#a848d38a01f7498761a3f9964a66f0555">OnPostUpdate</a> -= AfterFBBIK;</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;        }</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;        </div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;        <span class="comment">// Clamping Euler angles</span></div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;        <span class="keyword">private</span> <span class="keywordtype">float</span> ClampAngle (<span class="keywordtype">float</span> angle, <span class="keywordtype">float</span> min, <span class="keywordtype">float</span> max) {</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;            <span class="keywordflow">if</span> (angle &lt; -360) angle += 360;</div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;            <span class="keywordflow">if</span> (angle &gt; 360) angle -= 360;</div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;            <span class="keywordflow">return</span> Mathf.Clamp (angle, min, max);</div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;        }</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;    }</div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;}</div><div class="ttc" id="struct_root_motion_1_1_demos_1_1_v_r_aiming_controller_1_1_targets_html_a49ee9c533d1c84c8016a165c5ce8b1d0"><div class="ttname"><a href="struct_root_motion_1_1_demos_1_1_v_r_aiming_controller_1_1_targets.html#a49ee9c533d1c84c8016a165c5ce8b1d0">RootMotion.Demos.VRAimingController.Targets.rightHand</a></div><div class="ttdeci">Transform rightHand</div><div class="ttdef"><b>Definition:</b> <a href="_v_r_aiming_controller_8cs_source.html#l00016">VRAimingController.cs:16</a></div></div>
<div class="ttc" id="class_root_motion_1_1_demos_1_1_weapon_base_html_a1c14d851b1c4d00056867e21fcbcd3c7"><div class="ttname"><a href="class_root_motion_1_1_demos_1_1_weapon_base.html#a1c14d851b1c4d00056867e21fcbcd3c7">RootMotion.Demos.WeaponBase.recoilAngleVertical</a></div><div class="ttdeci">float recoilAngleVertical</div><div class="ttdef"><b>Definition:</b> <a href="_weapon_base_8cs_source.html#l00013">WeaponBase.cs:13</a></div></div>
<div class="ttc" id="class_root_motion_1_1_demos_1_1_v_r_aiming_controller_html_a4adf92a8752d112a38b0f7227f41359f"><div class="ttname"><a href="class_root_motion_1_1_demos_1_1_v_r_aiming_controller.html#a4adf92a8752d112a38b0f7227f41359f">RootMotion.Demos.VRAimingController.animatorController</a></div><div class="ttdeci">VRAnimatorController animatorController</div><div class="ttdef"><b>Definition:</b> <a href="_v_r_aiming_controller_8cs_source.html#l00033">VRAimingController.cs:33</a></div></div>
<div class="ttc" id="class_root_motion_1_1_demos_1_1_v_r_animator_controller_html_af2d8067d0e9946fd2f0f305f90b3e11f"><div class="ttname"><a href="class_root_motion_1_1_demos_1_1_v_r_animator_controller.html#af2d8067d0e9946fd2f0f305f90b3e11f">RootMotion.Demos.VRAnimatorController.velocity</a></div><div class="ttdeci">Vector3 velocity</div><div class="ttdef"><b>Definition:</b> <a href="_v_r_animator_controller_8cs_source.html#l00031">VRAnimatorController.cs:31</a></div></div>
<div class="ttc" id="class_root_motion_1_1_demos_1_1_v_r_aiming_controller_html"><div class="ttname"><a href="class_root_motion_1_1_demos_1_1_v_r_aiming_controller.html">RootMotion.Demos.VRAimingController</a></div><div class="ttdoc">Aiming weapons with the OVR headset. </div><div class="ttdef"><b>Definition:</b> <a href="_v_r_aiming_controller_8cs_source.html#l00012">VRAimingController.cs:12</a></div></div>
<div class="ttc" id="class_root_motion_1_1_biped_references_html_ad6fa2cc62f62b81150f4d5ef0217be72"><div class="ttname"><a href="class_root_motion_1_1_biped_references.html#ad6fa2cc62f62b81150f4d5ef0217be72">RootMotion.BipedReferences.rightHand</a></div><div class="ttdeci">Transform rightHand</div><div class="ttdoc">The third bone of the right arm. </div><div class="ttdef"><b>Definition:</b> <a href="_biped_references_8cs_source.html#l00070">BipedReferences.cs:70</a></div></div>
<div class="ttc" id="class_root_motion_1_1_final_i_k_1_1_i_k_effector_html_a0e404e3d964a2d69ff07c6d0f19fa983"><div class="ttname"><a href="class_root_motion_1_1_final_i_k_1_1_i_k_effector.html#a0e404e3d964a2d69ff07c6d0f19fa983">RootMotion.FinalIK.IKEffector.positionWeight</a></div><div class="ttdeci">float positionWeight</div><div class="ttdoc">The position weight. </div><div class="ttdef"><b>Definition:</b> <a href="_i_k_effector_8cs_source.html#l00033">IKEffector.cs:33</a></div></div>
<div class="ttc" id="namespace_root_motion_1_1_final_i_k_html"><div class="ttname"><a href="namespace_root_motion_1_1_final_i_k.html">RootMotion.FinalIK</a></div><div class="ttdef"><b>Definition:</b> <a href="_aim_i_k_inspector_8cs_source.html#l00005">AimIKInspector.cs:5</a></div></div>
<div class="ttc" id="class_root_motion_1_1_demos_1_1_v_r_animator_controller_html_af33a445600f484796940fee0442619b5"><div class="ttname"><a href="class_root_motion_1_1_demos_1_1_v_r_animator_controller.html#af33a445600f484796940fee0442619b5">RootMotion.Demos.VRAnimatorController.characterController</a></div><div class="ttdeci">Transform characterController</div><div class="ttdef"><b>Definition:</b> <a href="_v_r_animator_controller_8cs_source.html#l00016">VRAnimatorController.cs:16</a></div></div>
<div class="ttc" id="class_root_motion_1_1_final_i_k_1_1_poser_html_af8bf01f5bada3be99c43121b61022238"><div class="ttname"><a href="class_root_motion_1_1_final_i_k_1_1_poser.html#af8bf01f5bada3be99c43121b61022238">RootMotion.FinalIK.Poser.AutoMapping</a></div><div class="ttdeci">abstract void AutoMapping()</div><div class="ttdoc">Map this instance to the poseRoot. </div></div>
<div class="ttc" id="namespace_system_html"><div class="ttname"><a href="namespace_system.html">System</a></div></div>
<div class="ttc" id="class_root_motion_1_1_final_i_k_1_1_i_k_constraint_bend_html_acddd608db296ef32d7e3396918d0cfad"><div class="ttname"><a href="class_root_motion_1_1_final_i_k_1_1_i_k_constraint_bend.html#acddd608db296ef32d7e3396918d0cfad">RootMotion.FinalIK.IKConstraintBend.bendGoal</a></div><div class="ttdeci">Transform bendGoal</div><div class="ttdoc">The bend goal Transform. </div><div class="ttdef"><b>Definition:</b> <a href="_i_k_constraint_bend_8cs_source.html#l00029">IKConstraintBend.cs:29</a></div></div>
<div class="ttc" id="class_root_motion_1_1_demos_1_1_weapon_base_html"><div class="ttname"><a href="class_root_motion_1_1_demos_1_1_weapon_base.html">RootMotion.Demos.WeaponBase</a></div><div class="ttdoc">Base class for all Weapons so they could be fired regardless of type </div><div class="ttdef"><b>Definition:</b> <a href="_weapon_base_8cs_source.html#l00009">WeaponBase.cs:9</a></div></div>
<div class="ttc" id="class_root_motion_1_1_demos_1_1_weapon_base_html_ae0c2eda9d6c7f249bc08d670fb9dd7ff"><div class="ttname"><a href="class_root_motion_1_1_demos_1_1_weapon_base.html#ae0c2eda9d6c7f249bc08d670fb9dd7ff">RootMotion.Demos.WeaponBase.Fire</a></div><div class="ttdeci">abstract void Fire()</div></div>
<div class="ttc" id="class_root_motion_1_1_demos_1_1_weapon_base_html_a9eddded7a094a8fbf9acdd342ea72053"><div class="ttname"><a href="class_root_motion_1_1_demos_1_1_weapon_base.html#a9eddded7a094a8fbf9acdd342ea72053">RootMotion.Demos.WeaponBase.recoilRandom</a></div><div class="ttdeci">float recoilRandom</div><div class="ttdef"><b>Definition:</b> <a href="_weapon_base_8cs_source.html#l00015">WeaponBase.cs:15</a></div></div>
<div class="ttc" id="class_root_motion_1_1_demos_1_1_v_r_animator_controller_html_ae531f867289a1ea40a798b84d6f69cb2"><div class="ttname"><a href="class_root_motion_1_1_demos_1_1_v_r_animator_controller.html#ae531f867289a1ea40a798b84d6f69cb2">RootMotion.Demos.VRAnimatorController.cam</a></div><div class="ttdeci">Transform cam</div><div class="ttdef"><b>Definition:</b> <a href="_v_r_animator_controller_8cs_source.html#l00017">VRAnimatorController.cs:17</a></div></div>
<div class="ttc" id="class_root_motion_1_1_final_i_k_1_1_poser_html"><div class="ttname"><a href="class_root_motion_1_1_final_i_k_1_1_poser.html">RootMotion.FinalIK.Poser</a></div><div class="ttdoc">The base abstract class for all class that are translating a hierarchy of bones to match the translat...</div><div class="ttdef"><b>Definition:</b> <a href="_poser_8cs_source.html#l00009">Poser.cs:9</a></div></div>
<div class="ttc" id="class_root_motion_1_1_biped_references_html_a0d28263f5680784a76ea79c2f9c9a251"><div class="ttname"><a href="class_root_motion_1_1_biped_references.html#a0d28263f5680784a76ea79c2f9c9a251">RootMotion.BipedReferences.leftHand</a></div><div class="ttdeci">Transform leftHand</div><div class="ttdoc">The third bone of the left arm. </div><div class="ttdef"><b>Definition:</b> <a href="_biped_references_8cs_source.html#l00058">BipedReferences.cs:58</a></div></div>
<div class="ttc" id="class_root_motion_1_1_final_i_k_1_1_i_k_effector_html_a3ed027b3d54e6afa83aa3f293e84f629"><div class="ttname"><a href="class_root_motion_1_1_final_i_k_1_1_i_k_effector.html#a3ed027b3d54e6afa83aa3f293e84f629">RootMotion.FinalIK.IKEffector.position</a></div><div class="ttdeci">Vector3 position</div><div class="ttdoc">The effector position in world space. </div><div class="ttdef"><b>Definition:</b> <a href="_i_k_effector_8cs_source.html#l00042">IKEffector.cs:42</a></div></div>
<div class="ttc" id="class_root_motion_1_1_demos_1_1_v_r_animator_controller_html"><div class="ttname"><a href="class_root_motion_1_1_demos_1_1_v_r_animator_controller.html">RootMotion.Demos.VRAnimatorController</a></div><div class="ttdoc">Handles animation of a full body OVR character. </div><div class="ttdef"><b>Definition:</b> <a href="_v_r_animator_controller_8cs_source.html#l00012">VRAnimatorController.cs:12</a></div></div>
<div class="ttc" id="class_root_motion_1_1_final_i_k_1_1_poser_html_adab1ab1d067ac6ddf6df04ffbb9c96bb"><div class="ttname"><a href="class_root_motion_1_1_final_i_k_1_1_poser.html#adab1ab1d067ac6ddf6df04ffbb9c96bb">RootMotion.FinalIK.Poser.poseRoot</a></div><div class="ttdeci">Transform poseRoot</div><div class="ttdoc">Reference to the other Transform (should be identical to this one) </div><div class="ttdef"><b>Definition:</b> <a href="_poser_8cs_source.html#l00014">Poser.cs:14</a></div></div>
<div class="ttc" id="class_root_motion_1_1_final_i_k_1_1_f_b_i_k_chain_html_a9da22043dfd81c60bb9d3e8b7a7d6e8a"><div class="ttname"><a href="class_root_motion_1_1_final_i_k_1_1_f_b_i_k_chain.html#a9da22043dfd81c60bb9d3e8b7a7d6e8a">RootMotion.FinalIK.FBIKChain.bendConstraint</a></div><div class="ttdeci">IKConstraintBend bendConstraint</div><div class="ttdoc">Gets the bend constraint (if this chain has 3 segments). </div><div class="ttdef"><b>Definition:</b> <a href="_f_b_i_k_chain_8cs_source.html#l00171">FBIKChain.cs:171</a></div></div>
<div class="ttc" id="class_root_motion_1_1_demos_1_1_weapon_base_html_ab1ec81cb984557cbc299684a71d72fd9"><div class="ttname"><a href="class_root_motion_1_1_demos_1_1_weapon_base.html#ab1ec81cb984557cbc299684a71d72fd9">RootMotion.Demos.WeaponBase.recoilAngleHorizontal</a></div><div class="ttdeci">float recoilAngleHorizontal</div><div class="ttdef"><b>Definition:</b> <a href="_weapon_base_8cs_source.html#l00014">WeaponBase.cs:14</a></div></div>
<div class="ttc" id="class_root_motion_1_1_demos_1_1_v_r_animator_controller_html_a62e3a4eb28348a470e9327343f29d7ef"><div class="ttname"><a href="class_root_motion_1_1_demos_1_1_v_r_animator_controller.html#a62e3a4eb28348a470e9327343f29d7ef">RootMotion.Demos.VRAnimatorController.RotateCharacter</a></div><div class="ttdeci">void RotateCharacter(Vector3 forward, float maxAngle, Transform fix=null)</div><div class="ttdef"><b>Definition:</b> <a href="_v_r_animator_controller_8cs_source.html#l00104">VRAnimatorController.cs:104</a></div></div>
<div class="ttc" id="class_root_motion_1_1_final_i_k_1_1_i_k_solver_full_body_biped_html_a2bce9e947f2ba3547b087d561ef1b8ec"><div class="ttname"><a href="class_root_motion_1_1_final_i_k_1_1_i_k_solver_full_body_biped.html#a2bce9e947f2ba3547b087d561ef1b8ec">RootMotion.FinalIK.IKSolverFullBodyBiped.leftHandEffector</a></div><div class="ttdeci">IKEffector leftHandEffector</div><div class="ttdoc">Gets the left hand effector. </div><div class="ttdef"><b>Definition:</b> <a href="_i_k_solver_full_body_biped_8cs_source.html#l00085">IKSolverFullBodyBiped.cs:85</a></div></div>
<div class="ttc" id="class_root_motion_1_1_final_i_k_1_1_i_k_solver_full_body_biped_html_af2d0f9dc36bf32dcca65f9ffbefb3e41"><div class="ttname"><a href="class_root_motion_1_1_final_i_k_1_1_i_k_solver_full_body_biped.html#af2d0f9dc36bf32dcca65f9ffbefb3e41">RootMotion.FinalIK.IKSolverFullBodyBiped.leftArmChain</a></div><div class="ttdeci">FBIKChain leftArmChain</div><div class="ttdoc">Gets the left arm chain. </div><div class="ttdef"><b>Definition:</b> <a href="_i_k_solver_full_body_biped_8cs_source.html#l00102">IKSolverFullBodyBiped.cs:102</a></div></div>
<div class="ttc" id="class_root_motion_1_1_final_i_k_1_1_full_body_biped_i_k_html_ae1ba56ebef8d8312da5a610a90472823"><div class="ttname"><a href="class_root_motion_1_1_final_i_k_1_1_full_body_biped_i_k.html#ae1ba56ebef8d8312da5a610a90472823">RootMotion.FinalIK.FullBodyBipedIK.solver</a></div><div class="ttdeci">IKSolverFullBodyBiped solver</div><div class="ttdoc">The FullBodyBiped IK solver. </div><div class="ttdef"><b>Definition:</b> <a href="_full_body_biped_i_k_8cs_source.html#l00057">FullBodyBipedIK.cs:57</a></div></div>
<div class="ttc" id="namespace_root_motion_html"><div class="ttname"><a href="namespace_root_motion.html">RootMotion</a></div></div>
<div class="ttc" id="class_root_motion_1_1_demos_1_1_v_r_aiming_controller_html_aeac2a0bfa5586abce0d19104b82b967b"><div class="ttname"><a href="class_root_motion_1_1_demos_1_1_v_r_aiming_controller.html#aeac2a0bfa5586abce0d19104b82b967b">RootMotion.Demos.VRAimingController.currentWeapon</a></div><div class="ttdeci">WeaponBase currentWeapon</div><div class="ttdef"><b>Definition:</b> <a href="_v_r_aiming_controller_8cs_source.html#l00035">VRAimingController.cs:35</a></div></div>
<div class="ttc" id="class_root_motion_1_1_demos_1_1_v_r_aiming_controller_html_afa0172fdd1f8cf9ebee12261c514f0b8"><div class="ttname"><a href="class_root_motion_1_1_demos_1_1_v_r_aiming_controller.html#afa0172fdd1f8cf9ebee12261c514f0b8">RootMotion.Demos.VRAimingController.weaponsPivot</a></div><div class="ttdeci">Transform weaponsPivot</div><div class="ttdef"><b>Definition:</b> <a href="_v_r_aiming_controller_8cs_source.html#l00058">VRAimingController.cs:58</a></div></div>
<div class="ttc" id="class_root_motion_1_1_demos_1_1_v_r_aiming_controller_1_1_bone_rotation_offset_html_a671520b717523c724fc6a6c29484d221"><div class="ttname"><a href="class_root_motion_1_1_demos_1_1_v_r_aiming_controller_1_1_bone_rotation_offset.html#a671520b717523c724fc6a6c29484d221">RootMotion.Demos.VRAimingController.BoneRotationOffset.transform</a></div><div class="ttdeci">Transform transform</div><div class="ttdef"><b>Definition:</b> <a href="_v_r_aiming_controller_8cs_source.html#l00028">VRAimingController.cs:28</a></div></div>
<div class="ttc" id="class_root_motion_1_1_final_i_k_1_1_i_k_solver_full_body_biped_html_ae95e0496cfb2192e080c48069dc699ee"><div class="ttname"><a href="class_root_motion_1_1_final_i_k_1_1_i_k_solver_full_body_biped.html#ae95e0496cfb2192e080c48069dc699ee">RootMotion.FinalIK.IKSolverFullBodyBiped.rightArmChain</a></div><div class="ttdeci">FBIKChain rightArmChain</div><div class="ttdoc">Gets the right arm chain. </div><div class="ttdef"><b>Definition:</b> <a href="_i_k_solver_full_body_biped_8cs_source.html#l00106">IKSolverFullBodyBiped.cs:106</a></div></div>
<div class="ttc" id="class_root_motion_1_1_final_i_k_1_1_poser_html_a386d7427ccd5ed4e36f586b48435b94b"><div class="ttname"><a href="class_root_motion_1_1_final_i_k_1_1_poser.html#a386d7427ccd5ed4e36f586b48435b94b">RootMotion.FinalIK.Poser.weight</a></div><div class="ttdeci">float weight</div><div class="ttdoc">The master weight. </div><div class="ttdef"><b>Definition:</b> <a href="_poser_8cs_source.html#l00018">Poser.cs:18</a></div></div>
<div class="ttc" id="class_root_motion_1_1_demos_1_1_v_r_aiming_controller_1_1_bone_rotation_offset_html_aa0aa1e2e2ab44a35f765ed8f552f4154"><div class="ttname"><a href="class_root_motion_1_1_demos_1_1_v_r_aiming_controller_1_1_bone_rotation_offset.html#aa0aa1e2e2ab44a35f765ed8f552f4154">RootMotion.Demos.VRAimingController.BoneRotationOffset.value</a></div><div class="ttdeci">Vector3 value</div><div class="ttdef"><b>Definition:</b> <a href="_v_r_aiming_controller_8cs_source.html#l00029">VRAimingController.cs:29</a></div></div>
<div class="ttc" id="class_root_motion_1_1_final_i_k_1_1_full_body_biped_i_k_html"><div class="ttname"><a href="class_root_motion_1_1_final_i_k_1_1_full_body_biped_i_k.html">RootMotion.FinalIK.FullBodyBipedIK</a></div><div class="ttdoc">Full Body IK System designed specifically for bipeds </div><div class="ttdef"><b>Definition:</b> <a href="_full_body_biped_i_k_8cs_source.html#l00011">FullBodyBipedIK.cs:11</a></div></div>
<div class="ttc" id="class_root_motion_1_1_demos_1_1_v_r_aiming_controller_html_a3a845b81233fc8f78c93bcc93cb0cfa5"><div class="ttname"><a href="class_root_motion_1_1_demos_1_1_v_r_aiming_controller.html#a3a845b81233fc8f78c93bcc93cb0cfa5">RootMotion.Demos.VRAimingController.pivotMotionTarget</a></div><div class="ttdeci">Transform pivotMotionTarget</div><div class="ttdef"><b>Definition:</b> <a href="_v_r_aiming_controller_8cs_source.html#l00062">VRAimingController.cs:62</a></div></div>
<div class="ttc" id="class_root_motion_1_1_demos_1_1_v_r_aiming_controller_html_a24663be32b395b62fbdb07192c977478"><div class="ttname"><a href="class_root_motion_1_1_demos_1_1_v_r_aiming_controller.html#a24663be32b395b62fbdb07192c977478">RootMotion.Demos.VRAimingController.rightHandedTargets</a></div><div class="ttdeci">Targets rightHandedTargets</div><div class="ttdef"><b>Definition:</b> <a href="_v_r_aiming_controller_8cs_source.html#l00054">VRAimingController.cs:54</a></div></div>
<div class="ttc" id="class_root_motion_1_1_demos_1_1_v_r_animator_controller_html_a897d2132fddcaf0d6325bd1aca47b24b"><div class="ttname"><a href="class_root_motion_1_1_demos_1_1_v_r_animator_controller.html#a897d2132fddcaf0d6325bd1aca47b24b">RootMotion.Demos.VRAnimatorController.maxViewAngle</a></div><div class="ttdeci">float maxViewAngle</div><div class="ttdef"><b>Definition:</b> <a href="_v_r_animator_controller_8cs_source.html#l00027">VRAnimatorController.cs:27</a></div></div>
<div class="ttc" id="class_root_motion_1_1_demos_1_1_v_r_aiming_controller_html_a98b44bcc95c0f555e09fc2ecd124bef7"><div class="ttname"><a href="class_root_motion_1_1_demos_1_1_v_r_aiming_controller.html#a98b44bcc95c0f555e09fc2ecd124bef7">RootMotion.Demos.VRAimingController.weaponsAnchor</a></div><div class="ttdeci">Transform weaponsAnchor</div><div class="ttdef"><b>Definition:</b> <a href="_v_r_aiming_controller_8cs_source.html#l00060">VRAimingController.cs:60</a></div></div>
<div class="ttc" id="class_root_motion_1_1_demos_1_1_v_r_aiming_controller_html_ab88bf3b4946db8022f1a2049e3fc9399"><div class="ttname"><a href="class_root_motion_1_1_demos_1_1_v_r_aiming_controller.html#ab88bf3b4946db8022f1a2049e3fc9399">RootMotion.Demos.VRAimingController.Handedness</a></div><div class="ttdeci">Handedness</div><div class="ttdef"><b>Definition:</b> <a href="_v_r_aiming_controller_8cs_source.html#l00021">VRAimingController.cs:21</a></div></div>
<div class="ttc" id="class_root_motion_1_1_demos_1_1_weapon_base_html_a26aa17053a7f5a8373b6ac4c0592bdfe"><div class="ttname"><a href="class_root_motion_1_1_demos_1_1_weapon_base.html#a26aa17053a7f5a8373b6ac4c0592bdfe">RootMotion.Demos.WeaponBase.recoilDirection</a></div><div class="ttdeci">Vector3 recoilDirection</div><div class="ttdef"><b>Definition:</b> <a href="_weapon_base_8cs_source.html#l00012">WeaponBase.cs:12</a></div></div>
<div class="ttc" id="class_root_motion_1_1_final_i_k_1_1_full_body_biped_i_k_html_a0dfac5c2550dad76128806dd5fdc019b"><div class="ttname"><a href="class_root_motion_1_1_final_i_k_1_1_full_body_biped_i_k.html#a0dfac5c2550dad76128806dd5fdc019b">RootMotion.FinalIK.FullBodyBipedIK.references</a></div><div class="ttdeci">BipedReferences references</div><div class="ttdoc">The biped definition. Don&amp;#39;t change refences directly in runtime, use SetReferences(BipedReferences re...</div><div class="ttdef"><b>Definition:</b> <a href="_full_body_biped_i_k_8cs_source.html#l00052">FullBodyBipedIK.cs:52</a></div></div>
<div class="ttc" id="struct_root_motion_1_1_demos_1_1_v_r_aiming_controller_1_1_targets_html_ab0ef2ae0ee9f0dfabfd405596344dbaf"><div class="ttname"><a href="struct_root_motion_1_1_demos_1_1_v_r_aiming_controller_1_1_targets.html#ab0ef2ae0ee9f0dfabfd405596344dbaf">RootMotion.Demos.VRAimingController.Targets.boneRotationOffsets</a></div><div class="ttdeci">BoneRotationOffset [] boneRotationOffsets</div><div class="ttdef"><b>Definition:</b> <a href="_v_r_aiming_controller_8cs_source.html#l00017">VRAimingController.cs:17</a></div></div>
<div class="ttc" id="class_root_motion_1_1_final_i_k_1_1_i_k_solver_full_body_biped_html_a1faedd9aebeaaa3e042bdd74c434fb9d"><div class="ttname"><a href="class_root_motion_1_1_final_i_k_1_1_i_k_solver_full_body_biped.html#a1faedd9aebeaaa3e042bdd74c434fb9d">RootMotion.FinalIK.IKSolverFullBodyBiped.rightHandEffector</a></div><div class="ttdeci">IKEffector rightHandEffector</div><div class="ttdoc">Gets the right hand effector. </div><div class="ttdef"><b>Definition:</b> <a href="_i_k_solver_full_body_biped_8cs_source.html#l00089">IKSolverFullBodyBiped.cs:89</a></div></div>
<div class="ttc" id="class_root_motion_1_1_final_i_k_1_1_i_k_constraint_bend_html_ab50c664029898e7fefaab81134793ed0"><div class="ttname"><a href="class_root_motion_1_1_final_i_k_1_1_i_k_constraint_bend.html#ab50c664029898e7fefaab81134793ed0">RootMotion.FinalIK.IKConstraintBend.weight</a></div><div class="ttdeci">float weight</div><div class="ttdoc">The weight. If weight is 1, will override effector rotation and the joint will be rotated at the dire...</div><div class="ttdef"><b>Definition:</b> <a href="_i_k_constraint_bend_8cs_source.html#l00045">IKConstraintBend.cs:45</a></div></div>
<div class="ttc" id="struct_root_motion_1_1_demos_1_1_v_r_aiming_controller_1_1_targets_html"><div class="ttname"><a href="struct_root_motion_1_1_demos_1_1_v_r_aiming_controller_1_1_targets.html">RootMotion.Demos.VRAimingController.Targets</a></div><div class="ttdef"><b>Definition:</b> <a href="_v_r_aiming_controller_8cs_source.html#l00015">VRAimingController.cs:15</a></div></div>
<div class="ttc" id="class_root_motion_1_1_demos_1_1_v_r_aiming_controller_html_aaf70e369f4b6afc75b0d2fd39b7cd151"><div class="ttname"><a href="class_root_motion_1_1_demos_1_1_v_r_aiming_controller.html#aaf70e369f4b6afc75b0d2fd39b7cd151">RootMotion.Demos.VRAimingController.handedness</a></div><div class="ttdeci">Handedness handedness</div><div class="ttdef"><b>Definition:</b> <a href="_v_r_aiming_controller_8cs_source.html#l00048">VRAimingController.cs:48</a></div></div>
<div class="ttc" id="class_root_motion_1_1_final_i_k_1_1_i_k_solver_html_a848d38a01f7498761a3f9964a66f0555"><div class="ttname"><a href="class_root_motion_1_1_final_i_k_1_1_i_k_solver.html#a848d38a01f7498761a3f9964a66f0555">RootMotion.FinalIK.IKSolver.OnPostUpdate</a></div><div class="ttdeci">UpdateDelegate OnPostUpdate</div><div class="ttdoc">Called after writing the solved pose </div><div class="ttdef"><b>Definition:</b> <a href="_i_k_solver_8cs_source.html#l00395">IKSolver.cs:395</a></div></div>
<div class="ttc" id="namespace_unity_engine_html"><div class="ttname"><a href="namespace_unity_engine.html">UnityEngine</a></div></div>
<div class="ttc" id="class_root_motion_1_1_demos_1_1_v_r_aiming_controller_1_1_bone_rotation_offset_html"><div class="ttname"><a href="class_root_motion_1_1_demos_1_1_v_r_aiming_controller_1_1_bone_rotation_offset.html">RootMotion.Demos.VRAimingController.BoneRotationOffset</a></div><div class="ttdef"><b>Definition:</b> <a href="_v_r_aiming_controller_8cs_source.html#l00027">VRAimingController.cs:27</a></div></div>
<div class="ttc" id="class_root_motion_1_1_demos_1_1_v_r_aiming_controller_html_ae4024252e08d42e68c70c95eabc83f1a"><div class="ttname"><a href="class_root_motion_1_1_demos_1_1_v_r_aiming_controller.html#ae4024252e08d42e68c70c95eabc83f1a">RootMotion.Demos.VRAimingController.leftHandedTargets</a></div><div class="ttdeci">Targets leftHandedTargets</div><div class="ttdef"><b>Definition:</b> <a href="_v_r_aiming_controller_8cs_source.html#l00052">VRAimingController.cs:52</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_84bbf7b3c7f28a5a18725745e1505219.html">Assets</a></li><li class="navelem"><a class="el" href="dir_c0005b12c1c6ae1cb8e9754bcab8bc3c.html">Plugins</a></li><li class="navelem"><a class="el" href="dir_c0726432ada3de9e3d2a12572beaebec.html">RootMotion</a></li><li class="navelem"><a class="el" href="dir_92548afe4ff1affb2d70b4be084923d6.html">FinalIK</a></li><li class="navelem"><a class="el" href="dir_2ed8f2a220b81e7993c9bf5dd36522cc.html">_DEMOS</a></li><li class="navelem"><a class="el" href="dir_2d436613c6adc8f719eb10e836988b07.html">Virtual Reality</a></li><li class="navelem"><a class="el" href="dir_7d3bf1c31ba4ca28e7d328f886a0ed71.html">Scripts</a></li><li class="navelem"><a class="el" href="_v_r_aiming_controller_8cs.html">VRAimingController.cs</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.14 </li>
  </ul>
</div>
</body>
</html>
